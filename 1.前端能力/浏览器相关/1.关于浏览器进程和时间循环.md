# 首先说几个概念

> 什么是进程

  `进程是cpu分配的最小单位，不同进程相互独立，cpu同时只能处理一个进程，cpu通过时间片轮转进度算法来实现同时进行多个进程`

> 什么是线程

  线程是cpu调度的最小单位，同一个进程可以有多个线程，他们共享进程资源

> 浏览器是多进程的

  一般来说，一个程序就是一个进程，但是程序可能有多个功能模块，这些功能模块实际是通过子进程来实现的，这样我们可以称这个应用是多进程的
  对于chrome来说，每个ta b就是一个进程

> 浏览器有哪些进程

  1.主进程，（主要用于管理子进程，浏览器的动作，交互，不可见的请求等）
  2.第三方插件进程，每种类型的插件对应一个类型，使用该插件的时候就会创建
  3.GPU进程，用于绘制3d
  4.渲染进程，也就是我们常说的“浏览器内核”，每个tab都会有一个新进程

> 浏览器内核（渲染进程有哪些线程）

1.GUI渲染线程
2.JS引擎线程
3.事件触发线程
4.定时器触发线程
5.异步http处理线程

*两个重点：
1.GUI渲染线程和JS引擎线程互斥
2.JS引擎是单线程的


## 什么是事件循环
   事件触发线程，发生触发条件（键盘输入，点击等），定时器线程和http得到触发条件，就会把回调放入event loop，主线程代码执行完毕，JS引擎空闲时候就会去任务队列里面查看是否有可以执行的回调，往复如此

## 什么是宏任务，微任务
   我们可以把每次执行栈运行的代码看做一个宏任务（包括每次任务队列中取出来的回调），每一次宏任务代码从头到尾执行完之前不会执行其他代码。由于JS引擎和GUI线程是互斥的，所以为了保证JS引擎和DOM有序的工作，浏览器会在执行完一次宏任务之后，下一个宏任务开始之前进行GUI渲染界面
   例如一下代码
   ```
    document.body.background = 'red'
    document.body.background = 'black'
    document.body.background = 'green'
    document.body.background = 'blue'
    //我们可以看到页面没有中间过程，直接由白色变成了蓝色，原因就在于这些代码处于一个宏任务中，在渲染之前颜色值变成了blue，GUI才开始渲染
   ```
   第二个例子
   ```
    document.body.background = 'red'
    setTimeOut(()=>{
        document.body.background = 'blue'
    },0)
    //我们可以看到页面的颜色变成了红色，很快变成了蓝色
   ```

> 什么是微任务

  微任务可以堪称宏任务执行完毕之后在渲染之前执行的的代码
  ```
    setTimeOut(()=>{
        console.log(1)
        Promise.resolve(3).then(res=>console.log(res))
    },0)
    setTimeOut(()=>{
        console.log(2)
    },0)
    //1,3,2
  ```
    


  